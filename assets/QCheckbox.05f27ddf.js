import{aD as Yt,aA as Ht,aE as nn,a as w,c as pe,r as I,aB as an,w as V,h as y,T as ve,b as _t,g as $e,n as We,Y as Q,ac as on,y as dt,v as ft,o as ln,d as Xe,B as rn,l as Ne,t as un,N as sn,A as cn,m as dn,aF as fn,C as vn,a2 as hn}from"./index.9dafe3c6.js";import{u as kt,a as qt}from"./function.626c708b.js";import{p as Y,d as mn,u as gn,e as yn,a as Dn}from"./use-form.473e5b63.js";import{p as vt,u as Mn,a as bn,b as wn,c as xn,d as Sn,r as Cn,e as ht,f as Yn,g as Hn,Q as _n}from"./QDialog.4f4818b7.js";import{c as kn,u as qn,a as Tn,b as On}from"./selection.248b0aec.js";import{u as pn,a as $n,b as En,c as Fn}from"./use-prevent-scroll.ab33211b.js";import{l as In}from"./QCard.c4fa545a.js";const K=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function jn(e,n,r){return Object.prototype.toString.call(e)==="[object Date]"&&(r=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),Pn(Ke(e,n,r))}function mt(e,n,r){return Ot(An(e,n,r))}function Vn(e){return Bn(e)===0}function qe(e,n){return n<=6?31:n<=11||Vn(e)?30:29}function Bn(e){const n=K.length;let r=K[0],a,l,u,s,c;if(e<r||e>=K[n-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<n&&(a=K[c],l=a-r,!(e<a));c+=1)r=a;return s=e-r,l-s<6&&(s=s-l+q(l+4,33)*33),u=B(B(s+1,33)-1,4),u===-1&&(u=4),u}function Tt(e,n){const r=K.length,a=e+621;let l=-14,u=K[0],s,c,f,D,d;if(e<u||e>=K[r-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<r&&(s=K[d],c=s-u,!(e<s));d+=1)l=l+q(c,33)*8+q(B(c,33),4),u=s;D=e-u,l=l+q(D,33)*8+q(B(D,33)+3,4),B(c,33)===4&&c-D===4&&(l+=1);const M=q(a,4)-q((q(a,100)+1)*3,4)-150,O=20+l-M;return n||(c-D<6&&(D=D-c+q(c+4,33)*33),f=B(B(D+1,33)-1,4),f===-1&&(f=4)),{leap:f,gy:a,march:O}}function An(e,n,r){const a=Tt(e,!0);return Ke(a.gy,3,a.march)+(n-1)*31-q(n,7)*(n-7)+r-1}function Pn(e){const n=Ot(e).gy;let r=n-621,a,l,u;const s=Tt(r,!1),c=Ke(n,3,s.march);if(u=e-c,u>=0){if(u<=185)return l=1+q(u,31),a=B(u,31)+1,{jy:r,jm:l,jd:a};u-=186}else r-=1,u+=179,s.leap===1&&(u+=1);return l=7+q(u,30),a=B(u,30)+1,{jy:r,jm:l,jd:a}}function Ke(e,n,r){let a=q((e+q(n-8,6)+100100)*1461,4)+q(153*B(n+9,12)+2,5)+r-34840408;return a=a-q(q(e+100100+q(n-8,6),100)*3,4)+752,a}function Ot(e){let n=4*e+139361631;n=n+q(q(4*e+183187720,146097)*3,4)*4-3908;const r=q(B(n,1461),4)*5+308,a=q(B(r,153),5)+1,l=B(q(r,153),12)+1;return{gy:q(n,1461)-100100+q(8-l,6),gm:l,gd:a}}function q(e,n){return~~(e/n)}function B(e,n){return e-~~(e/n)*n}const pt=864e5,zn=36e5,Re=6e4,$t="YYYY-MM-DDTHH:mm:ss.SSSZ",Ln=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Wn=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Pe={};function Nn(e,n){const r="("+n.days.join("|")+")",a=e+r;if(Pe[a]!==void 0)return Pe[a];const l="("+n.daysShort.join("|")+")",u="("+n.months.join("|")+")",s="("+n.monthsShort.join("|")+")",c={};let f=0;const D=e.replace(Wn,M=>{switch(f++,M){case"YY":return c.YY=f,"(-?\\d{1,2})";case"YYYY":return c.YYYY=f,"(-?\\d{1,4})";case"M":return c.M=f,"(\\d{1,2})";case"MM":return c.M=f,"(\\d{2})";case"MMM":return c.MMM=f,s;case"MMMM":return c.MMMM=f,u;case"D":return c.D=f,"(\\d{1,2})";case"Do":return c.D=f++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=f,"(\\d{2})";case"H":return c.H=f,"(\\d{1,2})";case"HH":return c.H=f,"(\\d{2})";case"h":return c.h=f,"(\\d{1,2})";case"hh":return c.h=f,"(\\d{2})";case"m":return c.m=f,"(\\d{1,2})";case"mm":return c.m=f,"(\\d{2})";case"s":return c.s=f,"(\\d{1,2})";case"ss":return c.s=f,"(\\d{2})";case"S":return c.S=f,"(\\d{1})";case"SS":return c.S=f,"(\\d{2})";case"SSS":return c.S=f,"(\\d{3})";case"A":return c.A=f,"(AM|PM)";case"a":return c.a=f,"(am|pm)";case"aa":return c.aa=f,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=f,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=f,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=f,"(-?\\d+)";case"x":return c.x=f,"(-?\\d{4,})";default:return f--,M[0]==="["&&(M=M.substring(1,M.length-1)),M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),d={map:c,regex:new RegExp("^"+D)};return Pe[a]=d,d}function Et(e,n){return e!==void 0?e:n!==void 0?n.date:nn.date}function gt(e,n=""){const r=e>0?"-":"+",a=Math.abs(e),l=Math.floor(a/60),u=a%60;return r+Y(l)+n+Y(u)}function Rn(e,n,r){let a=e.getFullYear(),l=e.getMonth();const u=e.getDate();return n.year!==void 0&&(a+=r*n.year,delete n.year),n.month!==void 0&&(l+=r*n.month,delete n.month),e.setDate(1),e.setMonth(2),e.setFullYear(a),e.setMonth(l),e.setDate(Math.min(u,et(e))),n.date!==void 0&&(e.setDate(e.getDate()+r*n.date),delete n.date),e}function Qn(e,n,r){const a=n.year!==void 0?n.year:e[`get${r}FullYear`](),l=n.month!==void 0?n.month-1:e[`get${r}Month`](),u=new Date(a,l+1,0).getDate(),s=Math.min(u,n.date!==void 0?n.date:e[`get${r}Date`]());return e[`set${r}Date`](1),e[`set${r}Month`](2),e[`set${r}FullYear`](a),e[`set${r}Month`](l),e[`set${r}Date`](s),delete n.year,delete n.month,delete n.date,e}function Je(e,n,r){const a=Ft(n),l=new Date(e),u=a.year!==void 0||a.month!==void 0||a.date!==void 0?Rn(l,a,r):l;for(const s in a){const c=mn(s);u[`set${c}`](u[`get${c}`]()+r*a[s])}return u}function Ft(e){const n={...e};return e.years!==void 0&&(n.year=e.years,delete n.years),e.months!==void 0&&(n.month=e.months,delete n.months),e.days!==void 0&&(n.date=e.days,delete n.days),e.day!==void 0&&(n.date=e.day,delete n.day),e.hour!==void 0&&(n.hours=e.hour,delete n.hour),e.minute!==void 0&&(n.minutes=e.minute,delete n.minute),e.second!==void 0&&(n.seconds=e.second,delete n.second),e.millisecond!==void 0&&(n.milliseconds=e.millisecond,delete n.millisecond),n}function It(e,n,r){const a=Ft(n),l=r===!0?"UTC":"",u=new Date(e),s=a.year!==void 0||a.month!==void 0||a.date!==void 0?Qn(u,a,l):u;for(const c in a){const f=c.charAt(0).toUpperCase()+c.slice(1);s[`set${l}${f}`](a[c])}return s}function Zn(e,n,r){const a=jt(e,n,r),l=new Date(a.year,a.month===null?null:a.month-1,a.day===null?1:a.day,a.hour,a.minute,a.second,a.millisecond),u=l.getTimezoneOffset();return a.timezoneOffset===null||a.timezoneOffset===u?l:Je(l,{minutes:a.timezoneOffset-u},1)}function jt(e,n,r,a,l){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(u,l),e==null||e===""||typeof e!="string")return u;n===void 0&&(n=$t);const s=Et(r,Yt.props),c=s.months,f=s.monthsShort,{regex:D,map:d}=Nn(n,s),M=e.match(D);if(M===null)return u;let O="";if(d.X!==void 0||d.x!==void 0){const g=parseInt(M[d.X!==void 0?d.X:d.x],10);if(isNaN(g)===!0||g<0)return u;const _=new Date(g*(d.X!==void 0?1e3:1));u.year=_.getFullYear(),u.month=_.getMonth()+1,u.day=_.getDate(),u.hour=_.getHours(),u.minute=_.getMinutes(),u.second=_.getSeconds(),u.millisecond=_.getMilliseconds()}else{if(d.YYYY!==void 0)u.year=parseInt(M[d.YYYY],10);else if(d.YY!==void 0){const g=parseInt(M[d.YY],10);u.year=g<0?g:2e3+g}if(d.M!==void 0){if(u.month=parseInt(M[d.M],10),u.month<1||u.month>12)return u}else d.MMM!==void 0?u.month=f.indexOf(M[d.MMM])+1:d.MMMM!==void 0&&(u.month=c.indexOf(M[d.MMMM])+1);if(d.D!==void 0){if(u.day=parseInt(M[d.D],10),u.year===null||u.month===null||u.day<1)return u;const g=a!=="persian"?new Date(u.year,u.month,0).getDate():qe(u.year,u.month);if(u.day>g)return u}d.H!==void 0?u.hour=parseInt(M[d.H],10)%24:d.h!==void 0&&(u.hour=parseInt(M[d.h],10)%12,(d.A&&M[d.A]==="PM"||d.a&&M[d.a]==="pm"||d.aa&&M[d.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),d.m!==void 0&&(u.minute=parseInt(M[d.m],10)%60),d.s!==void 0&&(u.second=parseInt(M[d.s],10)%60),d.S!==void 0&&(u.millisecond=parseInt(M[d.S],10)*10**(3-M[d.S].length)),(d.Z!==void 0||d.ZZ!==void 0)&&(O=d.Z!==void 0?M[d.Z].replace(":",""):M[d.ZZ],u.timezoneOffset=(O[0]==="+"?-1:1)*(60*O.slice(1,3)+1*O.slice(3,5)))}return u.dateHash=Y(u.year,6)+"/"+Y(u.month)+"/"+Y(u.day),u.timeHash=Y(u.hour)+":"+Y(u.minute)+":"+Y(u.second)+O,u}function Un(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Xn(e,n){return It(new Date,e,n)}function Kn(e){const n=new Date(e).getDay();return n===0?7:n}function Qe(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=new Date(n.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const a=n.getTimezoneOffset()-r.getTimezoneOffset();n.setHours(n.getHours()-a);const l=(n-r)/(pt*7);return 1+Math.floor(l)}function Jn(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function ze(e,n){const r=new Date(e);return n===!0?Jn(r):r.getTime()}function Gn(e,n,r,a={}){const l=ze(n,a.onlyDate),u=ze(r,a.onlyDate),s=ze(e,a.onlyDate);return(s>l||a.inclusiveFrom===!0&&s===l)&&(s<u||a.inclusiveTo===!0&&s===u)}function ea(e,n){return Je(e,n,1)}function ta(e,n){return Je(e,n,-1)}function N(e,n,r){const a=new Date(e),l=`set${r===!0?"UTC":""}`;switch(n){case"year":case"years":a[`${l}Month`](0);case"month":case"months":a[`${l}Date`](1);case"day":case"days":case"date":a[`${l}Hours`](0);case"hour":case"hours":a[`${l}Minutes`](0);case"minute":case"minutes":a[`${l}Seconds`](0);case"second":case"seconds":a[`${l}Milliseconds`](0)}return a}function na(e,n,r){const a=new Date(e),l=`set${r===!0?"UTC":""}`;switch(n){case"year":case"years":a[`${l}Month`](11);case"month":case"months":a[`${l}Date`](et(a));case"day":case"days":case"date":a[`${l}Hours`](23);case"hour":case"hours":a[`${l}Minutes`](59);case"minute":case"minutes":a[`${l}Seconds`](59);case"second":case"seconds":a[`${l}Milliseconds`](999)}return a}function aa(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{n=Math.max(n,new Date(r))}),n}function oa(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{n=Math.min(n,new Date(r))}),n}function ke(e,n,r){return(e.getTime()-e.getTimezoneOffset()*Re-(n.getTime()-n.getTimezoneOffset()*Re))/r}function Ge(e,n,r="days"){const a=new Date(e),l=new Date(n);switch(r){case"years":case"year":return a.getFullYear()-l.getFullYear();case"months":case"month":return(a.getFullYear()-l.getFullYear())*12+a.getMonth()-l.getMonth();case"days":case"day":case"date":return ke(N(a,"day"),N(l,"day"),pt);case"hours":case"hour":return ke(N(a,"hour"),N(l,"hour"),zn);case"minutes":case"minute":return ke(N(a,"minute"),N(l,"minute"),Re);case"seconds":case"second":return ke(N(a,"second"),N(l,"second"),1e3)}}function Ze(e){return Ge(e,N(e,"year"),"days")+1}function la(e){return Ht(e)===!0?"date":typeof e=="number"?"number":"string"}function ra(e,n,r){const a=new Date(e);if(n){const l=new Date(n);if(a<l)return l}if(r){const l=new Date(r);if(a>l)return l}return a}function ua(e,n,r){const a=new Date(e),l=new Date(n);if(r===void 0)return a.getTime()===l.getTime();switch(r){case"second":case"seconds":if(a.getSeconds()!==l.getSeconds())return!1;case"minute":case"minutes":if(a.getMinutes()!==l.getMinutes())return!1;case"hour":case"hours":if(a.getHours()!==l.getHours())return!1;case"day":case"days":case"date":if(a.getDate()!==l.getDate())return!1;case"month":case"months":if(a.getMonth()!==l.getMonth())return!1;case"year":case"years":if(a.getFullYear()!==l.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function et(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function yt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Dt={YY(e,n,r){const a=this.YYYY(e,n,r)%100;return a>=0?Y(a):"-"+Y(Math.abs(a))},YYYY(e,n,r){return r!=null?r:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return Y(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return yt(this.Q(e))},D(e){return e.getDate()},Do(e){return yt(e.getDate())},DD(e){return Y(e.getDate())},DDD(e){return Ze(e)},DDDD(e){return Y(Ze(e),3)},d(e){return e.getDay()},dd(e,n){return this.dddd(e,n).slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Qe(e)},ww(e){return Y(Qe(e))},H(e){return e.getHours()},HH(e){return Y(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return Y(this.h(e))},m(e){return e.getMinutes()},mm(e){return Y(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Y(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Y(Math.floor(e.getMilliseconds()/10))},SSS(e){return Y(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,n,r,a){const l=a==null?e.getTimezoneOffset():a;return gt(l,":")},ZZ(e,n,r,a){const l=a==null?e.getTimezoneOffset():a;return gt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Vt(e,n,r,a,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;n===void 0&&(n=$t);const s=Et(r,Yt.props);return n.replace(Ln,(c,f)=>c in Dt?Dt[c](u,s,a,l):f===void 0?c:f.split("\\]").join("]"))}function ia(e){return Ht(e)===!0?new Date(e.getTime()):e}var Oa={isValid:Un,extractDate:Zn,buildDate:Xn,getDayOfWeek:Kn,getWeekOfYear:Qe,isBetweenDates:Gn,addToDate:ea,subtractFromDate:ta,adjustDate:It,startOfDate:N,endOfDate:na,getMaxDate:aa,getMinDate:oa,getDateDiff:Ge,getDayOfYear:Ze,inferDateFormat:la,getDateBetween:ra,isSameDate:ua,daysInMonth:et,formatDate:Vt,clone:ia};function sa(){const e=new Map;return{getCache:function(n,r){return e[n]===void 0?e[n]=r:e[n]},getCacheWithFn:function(n,r){return e[n]===void 0?e[n]=r():e[n]}}}const ca=["gregorian","persian"],da={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ca.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},fa=["update:modelValue"];function U(e){return e.year+"/"+Y(e.month)+"/"+Y(e.day)}function va(e,n){const r=w(()=>e.disable!==!0&&e.readonly!==!0),a=w(()=>e.editable===!0?0:-1),l=w(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function u(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function s(c){const f=new Date,D=c===!0?null:0;if(e.calendar==="persian"){const d=jn(f);return{year:d.jy,month:d.jm,day:d.jd}}return{year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate(),hour:D,minute:D,second:D,millisecond:D}}return{editable:r,tabindex:a,headerClass:l,getLocale:u,getCurrentDate:s}}const re=20,ha=["Calendar","Years","Months"],Mt=e=>ha.includes(e),Le=e=>/^-?[\d]+\/[0-1]\d$/.test(e),fe=" \u2014 ";function X(e){return e.year+"/"+Y(e.month)}var pa=pe({name:"QDate",props:{...da,...gn,...kt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Le},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Le},navigationMaxYearMonth:{type:String,validator:Le},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...fa,"range-start","range-end","navigation"],setup(e,{slots:n,emit:r}){const{proxy:a}=$e(),{$q:l}=a,u=qt(e,l),{getCache:s}=sa(),{tabindex:c,headerClass:f,getLocale:D,getCurrentDate:d}=va(e,l);let M;const O=yn(e),g=Dn(O),_=I(null),k=I(ot()),H=I(D()),De=w(()=>ot()),Me=w(()=>D()),P=w(()=>d()),b=I(lt(k.value,H.value)),E=I(e.defaultView),be=l.lang.rtl===!0?"right":"left",ie=I(be.value),z=I(be.value),he=b.value.year,J=I(he-he%re-(he<0?re:0)),$=I(null),we=w(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),R=w(()=>e.color||"primary"),L=w(()=>e.textColor||"white"),G=w(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),me=w(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),j=w(()=>me.value.filter(t=>typeof t=="string").map(t=>Fe(t,k.value,H.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),Z=w(()=>{const t=o=>Fe(o,k.value,H.value);return me.value.filter(o=>an(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),ee=w(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=mt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),te=w(()=>e.calendar==="persian"?U:(t,o,i)=>Vt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?k.value:o,i===void 0?H.value:i,t.year,t.timezoneOffset)),ne=w(()=>j.value.length+Z.value.reduce((t,o)=>t+1+Ge(ee.value(o.to),ee.value(o.from)),0)),xe=w(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if($.value!==null){const i=$.value.init,h=ee.value(i);return H.value.daysShort[h.getDay()]+", "+H.value.monthsShort[i.month-1]+" "+i.day+fe+"?"}if(ne.value===0)return fe;if(ne.value>1)return`${ne.value} ${H.value.pluralDay}`;const t=j.value[0],o=ee.value(t);return isNaN(o.valueOf())===!0?fe:H.value.headerTitle!==void 0?H.value.headerTitle(o,t):H.value.daysShort[o.getDay()]+", "+H.value.monthsShort[t.month-1]+" "+t.day}),Se=w(()=>j.value.concat(Z.value.map(o=>o.from)).sort((o,i)=>o.year-i.year||o.month-i.month)[0]),Ce=w(()=>j.value.concat(Z.value.map(o=>o.to)).sort((o,i)=>i.year-o.year||i.month-o.month)[0]),Ye=w(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ne.value===0)return fe;if(ne.value>1){const t=Se.value,o=Ce.value,i=H.value.monthsShort;return i[t.month-1]+(t.year!==o.year?" "+t.year+fe+i[o.month-1]+" ":t.month!==o.month?fe+i[o.month-1]:"")+" "+o.year}return j.value[0].year}),ae=w(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),se=w(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):H.value.firstDayOfWeek),oe=w(()=>{const t=H.value.daysShort,o=se.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),W=w(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():qe(t.year,t.month)}),S=w(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),p=w(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=w(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ge=w(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return p.value!==null&&p.value.year>=b.value.year&&(t.year.prev=!1,p.value.year===b.value.year&&p.value.month>=b.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=b.value.year&&(t.year.next=!1,F.value.year===b.value.year&&F.value.month<=b.value.month&&(t.month.next=!1)),t}),He=w(()=>{const t={};return j.value.forEach(o=>{const i=X(o);t[i]===void 0&&(t[i]=[]),t[i].push(o.day)}),t}),tt=w(()=>{const t={};return Z.value.forEach(o=>{const i=X(o.from),h=X(o.to);if(t[i]===void 0&&(t[i]=[]),t[i].push({from:o.from.day,to:i===h?o.to.day:void 0,range:o}),i<h){let v;const{year:C,month:m}=o.from,x=m<12?{year:C,month:m+1}:{year:C+1,month:1};for(;(v=X(x))<=h;)t[v]===void 0&&(t[v]=[]),t[v].push({from:void 0,to:v===h?o.to.day:void 0,range:o}),x.month++,x.month>12&&(x.year++,x.month=1)}}),t}),ye=w(()=>{if($.value===null)return;const{init:t,initHash:o,final:i,finalHash:h}=$.value,[v,C]=o<=h?[t,i]:[i,t],m=X(v),x=X(C);if(m!==A.value&&x!==A.value)return;const T={};return m===A.value?(T.from=v.day,T.includeFrom=!0):T.from=1,x===A.value?(T.to=C.day,T.includeTo=!0):T.to=W.value,T}),A=w(()=>X(b.value)),zt=w(()=>{const t={};if(e.options===void 0){for(let i=1;i<=W.value;i++)t[i]=!0;return t}const o=typeof e.options=="function"?e.options:i=>e.options.includes(i);for(let i=1;i<=W.value;i++){const h=A.value+"/"+Y(i);t[i]=o(h)}return t}),Lt=w(()=>{const t={};if(e.events===void 0)for(let o=1;o<=W.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:i=>e.events.includes(i);for(let i=1;i<=W.value;i++){const h=A.value+"/"+Y(i);t[i]=o(h)===!0&&S.value(h)}}return t}),Wt=w(()=>{let t,o;const{year:i,month:h}=b.value;if(e.calendar!=="persian")t=new Date(i,h-1,1),o=new Date(i,h-1,0).getDate();else{const v=mt(i,h,1);t=new Date(v.gy,v.gm-1,v.gd);let C=h-1,m=i;C===0&&(C=12,m--),o=qe(m,C)}return{days:t.getDay()-se.value-1,endDay:o}}),nt=w(()=>{const t=[],{days:o,endDay:i}=Wt.value,h=o<0?o+7:o;if(h<6)for(let m=i-h;m<=i;m++)t.push({i:m,fill:!0});const v=t.length;for(let m=1;m<=W.value;m++){const x={i:m,event:Lt.value[m],classes:[]};zt.value[m]===!0&&(x.in=!0,x.flat=!0),t.push(x)}if(He.value[A.value]!==void 0&&He.value[A.value].forEach(m=>{const x=v+m-1;Object.assign(t[x],{selected:!0,unelevated:!0,flat:!1,color:R.value,textColor:L.value})}),tt.value[A.value]!==void 0&&tt.value[A.value].forEach(m=>{if(m.from!==void 0){const x=v+m.from-1,T=v+(m.to||W.value)-1;for(let Ae=x;Ae<=T;Ae++)Object.assign(t[Ae],{range:m.range,unelevated:!0,color:R.value,textColor:L.value});Object.assign(t[x],{rangeFrom:!0,flat:!1}),m.to!==void 0&&Object.assign(t[T],{rangeTo:!0,flat:!1})}else if(m.to!==void 0){const x=v+m.to-1;for(let T=v;T<=x;T++)Object.assign(t[T],{range:m.range,unelevated:!0,color:R.value,textColor:L.value});Object.assign(t[x],{flat:!1,rangeTo:!0})}else{const x=v+W.value-1;for(let T=v;T<=x;T++)Object.assign(t[T],{range:m.range,unelevated:!0,color:R.value,textColor:L.value})}}),ye.value!==void 0){const m=v+ye.value.from-1,x=v+ye.value.to-1;for(let T=m;T<=x;T++)t[T].color=R.value,t[T].editRange=!0;ye.value.includeFrom===!0&&(t[m].editRangeFrom=!0),ye.value.includeTo===!0&&(t[x].editRangeTo=!0)}b.value.year===P.value.year&&b.value.month===P.value.month&&(t[v+P.value.day-1].today=!0);const C=t.length%7;if(C>0){const m=7-C;for(let x=1;x<=m;x++)t.push({i:x,fill:!0})}return t.forEach(m=>{let x="q-date__calendar-item ";m.fill===!0?x+="q-date__calendar-item--fill":(x+=`q-date__calendar-item--${m.in===!0?"in":"out"}`,m.range!==void 0&&(x+=` q-date__range${m.rangeTo===!0?"-to":m.rangeFrom===!0?"-from":""}`),m.editRange===!0&&(x+=` q-date__edit-range${m.editRangeFrom===!0?"-from":""}${m.editRangeTo===!0?"-to":""}`),(m.range!==void 0||m.editRange===!0)&&(x+=` text-${m.color}`)),m.classes=x}),t}),Nt=w(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});V(()=>e.modelValue,t=>{if(M===t)M=0;else{const{year:o,month:i}=lt(k.value,H.value);ce(o,i)}}),V(E,()=>{_.value!==null&&_.value.focus()}),V(()=>b.value.year,t=>{r("navigation",{year:t,month:b.value.month})}),V(()=>b.value.month,t=>{r("navigation",{year:b.value.year,month:t})}),V(De,t=>{ct(t,H.value,"mask"),k.value=t}),V(Me,t=>{ct(k.value,t,"locale"),H.value=t});function at(){const t=P.value,o=He.value[X(t)];(o===void 0||o.includes(t.day)===!1)&&je(t),Ee(t.year,t.month)}function Rt(t){Mt(t)===!0&&(E.value=t)}function Qt(t,o){["month","year"].includes(t)&&(t==="month"?ut:Ie)(o===!0?-1:1)}function Ee(t,o){E.value="Calendar",ce(t,o)}function Zt(t,o){if(e.range===!1||!t){$.value=null;return}const i=Object.assign({...b.value},t),h=o!==void 0?Object.assign({...b.value},o):i;$.value={init:i,initHash:U(i),final:h,finalHash:U(h)},Ee(i.year,i.month)}function ot(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Fe(t,o,i){return jt(t,o,i,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function lt(t,o){const i=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(i.length===0)return rt();const h=i[i.length-1],v=Fe(h.from!==void 0?h.from:h,t,o);return v.dateHash===null?rt():v}function rt(){let t,o;if(e.defaultYearMonth!==void 0){const i=e.defaultYearMonth.split("/");t=parseInt(i[0],10),o=parseInt(i[1],10)}else{const i=P.value!==void 0?P.value:d();t=i.year,o=i.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+Y(o)+"/01"}}function ut(t){let o=b.value.year,i=Number(b.value.month)+t;i===13?(i=1,o++):i===0&&(i=12,o--),ce(o,i),G.value===!0&&_e("month")}function Ie(t){const o=Number(b.value.year)+t;ce(o,b.value.month),G.value===!0&&_e("year")}function Ut(t){ce(t,b.value.month),E.value=e.defaultView==="Years"?"Months":"Calendar",G.value===!0&&_e("year")}function Xt(t){ce(b.value.year,t),E.value="Calendar",G.value===!0&&_e("month")}function Kt(t,o){const i=He.value[o];(i!==void 0&&i.includes(t.day)===!0?Ve:je)(t)}function le(t){return{year:t.year,month:t.month,day:t.day}}function ce(t,o){p.value!==null&&t<=p.value.year&&(t=p.value.year,o<p.value.month&&(o=p.value.month)),F.value!==null&&t>=F.value.year&&(t=F.value.year,o>F.value.month&&(o=F.value.month));const i=t+"/"+Y(o)+"/01";i!==b.value.dateHash&&(ie.value=b.value.dateHash<i==(l.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(z.value=ie.value),We(()=>{J.value=t-t%re-(t<0?re:0),Object.assign(b.value,{year:t,month:o,day:1,dateHash:i})}))}function it(t,o,i){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;M=h;const{reason:v,details:C}=st(o,i);r("update:modelValue",h,v,C)}function _e(t){const o=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...b.value};We(()=>{o.year=b.value.year,o.month=b.value.month;const i=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():qe(o.year,o.month);o.day=Math.min(Math.max(1,o.day),i);const h=de(o);M=h;const{details:v}=st("",o);r("update:modelValue",h,t,v)})}function st(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...le(o.target),from:le(o.from),to:le(o.to)}}:{reason:`${t}-day`,details:le(o)}}function de(t,o,i){return t.from!==void 0?{from:te.value(t.from,o,i),to:te.value(t.to,o,i)}:te.value(t,o,i)}function je(t){let o;if(e.multiple===!0)if(t.from!==void 0){const i=U(t.from),h=U(t.to),v=j.value.filter(m=>m.dateHash<i||m.dateHash>h),C=Z.value.filter(({from:m,to:x})=>x.dateHash<i||m.dateHash>h);o=v.concat(C).concat(t).map(m=>de(m))}else{const i=me.value.slice();i.push(de(t)),o=i}else o=de(t);it(o,"add",t)}function Ve(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const i=de(t);t.from!==void 0?o=e.modelValue.filter(h=>h.from!==void 0?h.from!==i.from&&h.to!==i.to:!0):o=e.modelValue.filter(h=>h!==i),o.length===0&&(o=null)}it(o,"remove",t)}function ct(t,o,i){const h=j.value.concat(Z.value).map(v=>de(v,t,o)).filter(v=>v.from!==void 0?v.from.dateHash!==null&&v.to.dateHash!==null:v.dateHash!==null);r("update:modelValue",(e.multiple===!0?h:h[0])||null,i)}function Jt(){if(e.minimal!==!0)return y("div",{class:"q-date__header "+f.value},[y("div",{class:"relative-position"},[y(ve,{name:"q-transition--fade"},()=>y("div",{key:"h-yr-"+Ye.value,class:"q-date__header-subtitle q-date__header-link "+(E.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...s("vY",{onClick(){E.value="Years"},onKeyup(t){t.keyCode===13&&(E.value="Years")}})},[Ye.value]))]),y("div",{class:"q-date__header-title relative-position flex no-wrap"},[y("div",{class:"relative-position col"},[y(ve,{name:"q-transition--fade"},()=>y("div",{key:"h-sub"+xe.value,class:"q-date__header-title-label q-date__header-link "+(E.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...s("vC",{onClick(){E.value="Calendar"},onKeyup(t){t.keyCode===13&&(E.value="Calendar")}})},[xe.value]))]),e.todayBtn===!0?y(Q,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:at}):null])])}function Be({label:t,type:o,key:i,dir:h,goTo:v,boundaries:C,cls:m}){return[y("div",{class:"row items-center q-date__arrow"},[y(Q,{round:!0,dense:!0,size:"sm",flat:!0,icon:ae.value[0],tabindex:c.value,disable:C.prev===!1,...s("go-#"+o,{onClick(){v(-1)}})})]),y("div",{class:"relative-position overflow-hidden flex flex-center"+m},[y(ve,{name:"q-transition--jump-"+h},()=>y("div",{key:i},[y(Q,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...s("view#"+o,{onClick:()=>{E.value=o}})})]))]),y("div",{class:"row items-center q-date__arrow"},[y(Q,{round:!0,dense:!0,size:"sm",flat:!0,icon:ae.value[1],tabindex:c.value,disable:C.next===!1,...s("go+#"+o,{onClick(){v(1)}})})])]}const Gt={Calendar:()=>[y("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[y("div",{class:"q-date__navigation row items-center no-wrap"},Be({label:H.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:ie.value,goTo:ut,boundaries:ge.value.month,cls:" col"}).concat(Be({label:b.value.year,type:"Years",key:b.value.year,dir:z.value,goTo:Ie,boundaries:ge.value.year,cls:""}))),y("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},oe.value.map(t=>y("div",{class:"q-date__calendar-item"},[y("div",t)]))),y("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[y(ve,{name:"q-transition--slide-"+ie.value},()=>y("div",{key:A.value,class:"q-date__calendar-days fit"},nt.value.map(t=>y("div",{class:t.classes},[t.in===!0?y(Q,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...s("day#"+t.i,{onClick:()=>{en(t.i)},onMouseover:()=>{tn(t.i)}})},t.event!==!1?()=>y("div",{class:"q-date__event bg-"+t.event}):null):y("div",""+t.i)]))))])])],Months(){const t=b.value.year===P.value.year,o=h=>p.value!==null&&b.value.year===p.value.year&&p.value.month>h||F.value!==null&&b.value.year===F.value.year&&F.value.month<h,i=H.value.monthsShort.map((h,v)=>{const C=b.value.month===v+1;return y("div",{class:"q-date__months-item flex flex-center"},[y(Q,{class:t===!0&&P.value.month===v+1?"q-date__today":null,flat:C!==!0,label:h,unelevated:C,color:C===!0?R.value:null,textColor:C===!0?L.value:null,tabindex:c.value,disable:o(v+1),...s("month#"+v,{onClick:()=>{Xt(v+1)}})})])});return e.yearsInMonthView===!0&&i.unshift(y("div",{class:"row no-wrap full-width"},[Be({label:b.value.year,type:"Years",key:b.value.year,dir:z.value,goTo:Ie,boundaries:ge.value.year,cls:" col"})])),y("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},i)},Years(){const t=J.value,o=t+re,i=[],h=v=>p.value!==null&&p.value.year>v||F.value!==null&&F.value.year<v;for(let v=t;v<=o;v++){const C=b.value.year===v;i.push(y("div",{class:"q-date__years-item flex flex-center"},[y(Q,{key:"yr"+v,class:P.value.year===v?"q-date__today":null,flat:!C,label:v,dense:!0,unelevated:C,color:C===!0?R.value:null,textColor:C===!0?L.value:null,tabindex:c.value,disable:h(v),...s("yr#"+v,{onClick:()=>{Ut(v)}})})]))}return y("div",{class:"q-date__view q-date__years flex flex-center"},[y("div",{class:"col-auto"},[y(Q,{round:!0,dense:!0,flat:!0,icon:ae.value[0],tabindex:c.value,disable:h(t),...s("y-",{onClick:()=>{J.value-=re}})})]),y("div",{class:"q-date__years-content col self-stretch row items-center"},i),y("div",{class:"col-auto"},[y(Q,{round:!0,dense:!0,flat:!0,icon:ae.value[1],tabindex:c.value,disable:h(o),...s("y+",{onClick:()=>{J.value+=re}})})])])}};function en(t){const o={...b.value,day:t};if(e.range===!1){Kt(o,A.value);return}if($.value===null){const i=nt.value.find(v=>v.fill!==!0&&v.i===t);if(e.noUnset!==!0&&i.range!==void 0){Ve({target:o,from:i.range.from,to:i.range.to});return}if(i.selected===!0){Ve(o);return}const h=U(o);$.value={init:o,initHash:h,final:o,finalHash:h},r("range-start",le(o))}else{const i=$.value.initHash,h=U(o),v=i<=h?{from:$.value.init,to:o}:{from:o,to:$.value.init};$.value=null,je(i===h?o:{target:o,...v}),r("range-end",{from:le(v.from),to:le(v.to)})}}function tn(t){if($.value!==null){const o={...b.value,day:t};Object.assign($.value,{final:o,finalHash:U(o)})}}return Object.assign(a,{setToday:at,setView:Rt,offsetCalendar:Qt,setCalendarTo:Ee,setEditingRange:Zt}),()=>{const t=[y("div",{class:"q-date__content col relative-position"},[y(ve,{name:"q-transition--fade"},Gt[E.value])])],o=_t(n.default);return o!==void 0&&t.push(y("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&g(t,"push"),y("div",{class:we.value,...Nt.value},[Jt(),y("div",{ref:_,class:"q-date__main col column",tabindex:-1},t)])}}});const Bt={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function At({showing:e,avoidEmit:n,configureAnchorEl:r}){const{props:a,proxy:l,emit:u}=$e(),s=I(null);let c;function f(g){return s.value===null?!1:g===void 0||g.touches===void 0||g.touches.length<=1}const D={};r===void 0&&(Object.assign(D,{hide(g){l.hide(g)},toggle(g){l.toggle(g),g.qAnchorHandled=!0},toggleKey(g){on(g,13)===!0&&D.toggle(g)},contextClick(g){l.hide(g),dt(g),We(()=>{l.show(g),g.qAnchorHandled=!0})},prevent:dt,mobileTouch(g){if(D.mobileCleanup(g),f(g)!==!0)return;l.hide(g),s.value.classList.add("non-selectable");const _=g.target;ft(D,"anchor",[[_,"touchmove","mobileCleanup","passive"],[_,"touchend","mobileCleanup","passive"],[_,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{l.show(g),g.qAnchorHandled=!0},300)},mobileCleanup(g){s.value.classList.remove("non-selectable"),clearTimeout(c),e.value===!0&&g!==void 0&&kn()}}),r=function(g=a.contextMenu){if(a.noParentEvent===!0||s.value===null)return;let _;g===!0?l.$q.platform.is.mobile===!0?_=[[s.value,"touchstart","mobileTouch","passive"]]:_=[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:_=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],ft(D,"anchor",_)});function d(){rn(D,"anchor")}function M(g){for(s.value=g;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;r()}function O(){if(a.target===!1||a.target===""||l.$el.parentNode===null)s.value=null;else if(a.target===!0)M(l.$el.parentNode);else{let g=a.target;if(typeof a.target=="string")try{g=document.querySelector(a.target)}catch{g=void 0}g!=null?(s.value=g.$el||g,r()):(s.value=null,console.error(`Anchor: target "${a.target}" not found`))}}return V(()=>a.contextMenu,g=>{s.value!==null&&(d(),r(g))}),V(()=>a.target,()=>{s.value!==null&&d(),O()}),V(()=>a.noParentEvent,g=>{s.value!==null&&(g===!0?d():r())}),ln(()=>{O(),n!==!0&&a.modelValue===!0&&s.value===null&&u("update:modelValue",!1)}),Xe(()=>{clearTimeout(c),d()}),{anchorEl:s,canShow:f,anchorEvents:D}}function ma(e,n){const r=I(null);let a;function l(c,f){const D=`${f!==void 0?"add":"remove"}EventListener`,d=f!==void 0?f:a;c!==window&&c[D]("scroll",d,Ne.passive),window[D]("scroll",d,Ne.passive),a=f}function u(){r.value!==null&&(l(r.value),r.value=null)}const s=V(()=>e.noParentEvent,()=>{r.value!==null&&(u(),n())});return Xe(s),{localScrollTarget:r,unconfigureScrollTarget:u,changeScrollEvent:l}}let Pt;const{notPassiveCapture:Te}=Ne,ue=[];function Oe(e){clearTimeout(Pt);const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let r=vt.length-1;for(;r>=0;){const a=vt[r].$;if(a.type.name!=="QDialog")break;if(a.props.seamless!==!0)return;r--}for(let a=ue.length-1;a>=0;a--){const l=ue[a];if((l.anchorEl.value===null||l.anchorEl.value.contains(n)===!1)&&(n===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(n)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function ga(e){ue.push(e),ue.length===1&&(document.addEventListener("mousedown",Oe,Te),document.addEventListener("touchstart",Oe,Te))}function bt(e){const n=ue.findIndex(r=>r===e);n>-1&&(ue.splice(n,1),ue.length===0&&(clearTimeout(Pt),document.removeEventListener("mousedown",Oe,Te),document.removeEventListener("touchstart",Oe,Te)))}let wt,xt;function St(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ya(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Ue={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Ue[`${e}#ltr`]=e,Ue[`${e}#rtl`]=e});function Ct(e,n){const r=e.split(" ");return{vertical:r[0],horizontal:Ue[`${r[1]}#${n===!0?"rtl":"ltr"}`]}}function Da(e,n){let{top:r,left:a,right:l,bottom:u,width:s,height:c}=e.getBoundingClientRect();return n!==void 0&&(r-=n[1],a-=n[0],u+=n[1],l+=n[0],s+=n[0],c+=n[1]),{top:r,left:a,right:l,bottom:u,width:s,height:c,middle:a+(l-a)/2,center:r+(u-r)/2}}function Ma(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function ba(e){if(un.is.ios===!0&&window.visualViewport!==void 0){const c=document.body.style,{offsetLeft:f,offsetTop:D}=window.visualViewport;f!==wt&&(c.setProperty("--q-pe-left",f+"px"),wt=f),D!==xt&&(c.setProperty("--q-pe-top",D+"px"),xt=D)}let n;const{scrollLeft:r,scrollTop:a}=e.el;if(e.absoluteOffset===void 0)n=Da(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:c,left:f}=e.anchorEl.getBoundingClientRect(),D=c+e.absoluteOffset.top,d=f+e.absoluteOffset.left;n={top:D,left:d,width:1,height:1,right:d+1,center:D,middle:d,bottom:D+1}}let l={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(l.minWidth=n.width+"px",e.cover===!0&&(l.minHeight=n.height+"px")),Object.assign(e.el.style,l);const u=Ma(e.el),s={top:n[e.anchorOrigin.vertical]-u[e.selfOrigin.vertical],left:n[e.anchorOrigin.horizontal]-u[e.selfOrigin.horizontal]};wa(s,n,u,e.anchorOrigin,e.selfOrigin),l={top:s.top+"px",left:s.left+"px"},s.maxHeight!==void 0&&(l.maxHeight=s.maxHeight+"px",n.height>s.maxHeight&&(l.minHeight=l.maxHeight)),s.maxWidth!==void 0&&(l.maxWidth=s.maxWidth+"px",n.width>s.maxWidth&&(l.minWidth=l.maxWidth)),Object.assign(e.el.style,l),e.el.scrollTop!==a&&(e.el.scrollTop=a),e.el.scrollLeft!==r&&(e.el.scrollLeft=r)}function wa(e,n,r,a,l){const u=r.bottom,s=r.right,c=sn(),f=window.innerHeight-c,D=document.body.clientWidth;if(e.top<0||e.top+u>f)if(l.vertical==="center")e.top=n[a.vertical]>f/2?Math.max(0,f-u):0,e.maxHeight=Math.min(u,f);else if(n[a.vertical]>f/2){const d=Math.min(f,a.vertical==="center"?n.center:a.vertical===l.vertical?n.bottom:n.top);e.maxHeight=Math.min(u,d),e.top=Math.max(0,d-u)}else e.top=Math.max(0,a.vertical==="center"?n.center:a.vertical===l.vertical?n.top:n.bottom),e.maxHeight=Math.min(u,f-e.top);if(e.left<0||e.left+s>D)if(e.maxWidth=Math.min(s,D),l.horizontal==="middle")e.left=n[a.horizontal]>D/2?Math.max(0,D-s):0;else if(n[a.horizontal]>D/2){const d=Math.min(D,a.horizontal==="middle"?n.middle:a.horizontal===l.horizontal?n.right:n.left);e.maxWidth=Math.min(s,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,a.horizontal==="middle"?n.middle:a.horizontal===l.horizontal?n.left:n.right),e.maxWidth=Math.min(s,D-e.left)}var xa=pe({name:"QMenu",inheritAttrs:!1,props:{...Bt,...pn,...kt,...Mn,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:St},self:{type:String,validator:St},offset:{type:Array,validator:ya},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...$n,"click","escape-key"],setup(e,{slots:n,emit:r,attrs:a}){let l=null,u,s,c;const f=$e(),{proxy:D}=f,{$q:d}=D,M=I(null),O=I(!1),g=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),_=qt(e,d),{registerTick:k,removeTick:H}=bn(),{registerTimeout:De,removeTimeout:Me}=En(),{transition:P,transitionStyle:b}=wn(e,O),{localScrollTarget:E,changeScrollEvent:be,unconfigureScrollTarget:ie}=ma(e,Ce),{anchorEl:z,canShow:he}=At({showing:O}),{hide:J}=Fn({showing:O,canShow:he,handleShow:ne,handleHide:xe,hideOnRouteChange:g,processOnMount:!0}),{showPortal:$,hidePortal:we,renderPortal:R}=xn(f,M,W),L={anchorEl:z,innerRef:M,onClickOutside(S){if(e.persistent!==!0&&O.value===!0)return J(S),(S.type==="touchstart"||S.target.classList.contains("q-dialog__backdrop"))&&vn(S),!0}},G=w(()=>Ct(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),me=w(()=>e.cover===!0?G.value:Ct(e.self||"top start",d.lang.rtl)),j=w(()=>(e.square===!0?" q-menu--square":"")+(_.value===!0?" q-menu--dark q-dark":"")),Z=w(()=>e.autoClose===!0?{onClick:Ye}:{}),ee=w(()=>O.value===!0&&e.persistent!==!0);V(ee,S=>{S===!0?(Hn(se),ga(L)):(ht(se),bt(L))});function te(){In(()=>{let S=M.value;S&&S.contains(document.activeElement)!==!0&&(S=S.querySelector("[autofocus], [data-autofocus]")||S,S.focus({preventScroll:!0}))})}function ne(S){if(H(),Me(),l=e.noRefocus===!1?document.activeElement:null,Sn(ae),$(),Ce(),u=void 0,S!==void 0&&(e.touchPosition||e.contextMenu)){const p=cn(S);if(p.left!==void 0){const{top:F,left:ge}=z.value.getBoundingClientRect();u={left:p.left-ge,top:p.top-F}}}s===void 0&&(s=V(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,oe)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{oe(),e.noFocus!==!0&&te()}),De(()=>{d.platform.is.ios===!0&&(c=e.autoClose,M.value.click()),oe(),$(!0),r("show",S)},e.transitionDuration)}function xe(S){H(),Me(),we(),Se(!0),l!==null&&(S===void 0||S.qClickOutside!==!0)&&(l.focus(),l=null),De(()=>{we(!0),r("hide",S)},e.transitionDuration)}function Se(S){u=void 0,s!==void 0&&(s(),s=void 0),(S===!0||O.value===!0)&&(Cn(ae),ie(),bt(L),ht(se)),S!==!0&&(l=null)}function Ce(){(z.value!==null||e.scrollTarget!==void 0)&&(E.value=dn(z.value,e.scrollTarget),be(E.value,oe))}function Ye(S){c!==!0?(Yn(D,S),r("click",S)):c=!1}function ae(S){ee.value===!0&&e.noFocus!==!0&&fn(M.value,S.target)!==!0&&te()}function se(S){r("escape-key"),J(S)}function oe(){const S=M.value;S===null||z.value===null||ba({el:S,offset:e.offset,anchorEl:z.value,anchorOrigin:G.value,selfOrigin:me.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function W(){return y(ve,{name:P.value,appear:!0},()=>O.value===!0?y("div",{...a,ref:M,tabindex:-1,class:["q-menu q-position-engine scroll"+j.value,a.class],style:[a.style,b.value],...Z.value},_t(n.default)):null)}return Xe(Se),Object.assign(D,{focus:te,updatePosition:oe}),R}}),$a=pe({name:"QPopupProxy",props:{...Bt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:r,attrs:a}){const{proxy:l}=$e(),{$q:u}=l,s=I(!1),c=I(null),f=w(()=>parseInt(e.breakpoint,10)),{canShow:D}=At({showing:s});function d(){return u.screen.width<f.value||u.screen.height<f.value?"dialog":"menu"}const M=I(d()),O=w(()=>M.value==="menu"?{maxHeight:"99vh"}:{});V(()=>d(),k=>{s.value!==!0&&(M.value=k)});function g(k){s.value=!0,r("show",k)}function _(k){s.value=!1,M.value=d(),r("hide",k)}return Object.assign(l,{show(k){D(k)===!0&&c.value.show(k)},hide(k){c.value.hide(k)},toggle(k){c.value.toggle(k)}}),()=>{const k={ref:c,...O.value,...a,onShow:g,onHide:_};let H;return M.value==="dialog"?H=_n:(H=xa,Object.assign(k,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(H,k,n.default)}}});const Sa=y("div",{key:"svg",class:"q-checkbox__bg absolute"},[y("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[y("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),y("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ea=pe({name:"QCheckbox",props:qn,emits:Tn,setup(e){function n(r,a){const l=w(()=>(r.value===!0?e.checkedIcon:a.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>l.value!==null?[y("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[y(hn,{class:"q-checkbox__icon",name:l.value})])]:[Sa]}return On("checkbox",n)}});export{$a as Q,pa as a,xa as b,Ea as c,Oa as d,sa as u};
