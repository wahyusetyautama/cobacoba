import{R as pe,r as u,O as X,S as i,U as C,V as t,W as ce,an as ve,a3 as o,X as a,Y as p,$ as v,a0 as x,a1 as y,a2 as Z,Z as f,_ as d,av as k,a8 as G,H as J,a6 as E}from"./index.9dafe3c6.js";import{a as fe,b as ee,c as V,d as be,f as ke,e as ge}from"./QTable.a4ae34d9.js";import{a as M,b as Y,Q as F}from"./QCard.c4fa545a.js";import{Q as I}from"./QDialog.4f4818b7.js";import{Q as _e,a as ye,C as ae}from"./ClosePopup.714dc5c1.js";import{d as Q,Q as le,a as te}from"./QCheckbox.05f27ddf.js";import{b as Ve,c as g,n as b}from"./function.626c708b.js";import{u as we}from"./use-meta.6e4b83a8.js";import{u as je}from"./storage.58af7870.js";import"./QItemSection.a12bf9c4.js";import"./QMarkupTable.36a1defc.js";import"./use-form.473e5b63.js";import"./use-prevent-scroll.ab33211b.js";import"./selection.248b0aec.js";const he={class:"q-my-lg"},xe={class:"q-pa-md"},Me=o("div",{class:"text-h6"},"Inventaris Aset",-1),Qe={key:1,class:"text-weight-bold"},qe=o("br",null,null,-1),De={class:"text-caption"},Ue=o("br",null,null,-1),Se={class:"text-weight-bold"},Ce={class:"row no-wrap"},Ye={class:"row no-wrap"},Ie={class:"row items-center justify-end"},Pe={class:"row items-center justify-end"},Ge=pe({__name:"AuthAset",setup(Ae){we({title:"Aset",titleTemplate:n=>`${n} - e-Umum 155`,meta:{description:{name:"description",content:"Inventaris aset aplikasi e Umum 155"},keywords:{name:"keywords",content:"Aplikasi e Umum 155"}}});const W=ce(),s=je(),w=u(!1),j=Ve(),P=u({}),A=u([]),q=u([]),R=u([]),T=u([]),H=u([]);function $(){w.value=!0,g.get("asets/index").then(n=>{s.aset=n.data,A.value=s.aset.datautama,q.value=s.aset.asetada,R.value=s.aset.idkembali,T.value=s.aset.asetterpinjam,H.value=s.aset.pengguna,w.value=!1}).catch(n=>{b(n.response.data)})}function ne(){g.get("waktu").then(n=>{h.value=n.data.waktu}).catch(n=>{b(n.response.data),s.$reset(),j.localStorage.remove("auth"),W.push("/")})}function se(){g.get("user").then(n=>{s.user=n.data,P.value=s.user}).catch(n=>{b(n.response.data)})}j.localStorage.getItem("auth")?(ne(),s.aset?(A.value=s.aset.datautama,q.value=s.aset.asetada,R.value=s.aset.idkembali,T.value=s.aset.asetterpinjam,H.value=s.aset.pengguna):$(),s.user?P.value=s.user:se()):W.push("/");const h=u(null);setInterval(()=>{h.value=Q.addToDate(h.value,{seconds:1})},1e3);const oe=[{name:"mulai_pinjam",align:"center",label:"Mulai Pinjam",field:"mulai_pinjam",sortable:!0},{name:"selesai_pinjam",align:"center",label:"Selesai Pinjam",field:"selesai_pinjam",sortable:!0},{name:"kendaraan.nama",align:"center",label:"Kendaraan",field:"kendaraan.nama"},{name:"user.name",align:"center",label:"Peminjam",field:"user.name"},{name:"tujuan",align:"center",label:"Tujuan",field:"tujuan"},{name:"keperluan",align:"center",label:"Keperluan",field:"keperluan"}],B=u(!1),m=u(!1),K=u(null),N=u(null),O=u(null),D=u(!1),c=X({tujuan:null,keperluan:null,kendaraan_id:null});function ue(){m.value=!0,g.post("asets/store",c).then(n=>{D.value=!1,w.value=!0,b(n.data),z(),$(),m.value=!1}).catch(n=>{b(n.response.data),m.value=!1})}function z(){c.tujuan=null,c.keperluan=null,c.kendaraan_id=null}const U=u(!1);function re(n){U.value=!0,K.value=n.id,N.value=n.nama}function ie(){m.value=!0,g.patch("asets/"+K.value).then(n=>{U.value=!1,w.value=!0,b(n.data),N.value=null,K.value=null,$(),m.value=!1}).catch(n=>{b(n.response.data),m.value=!1})}const L=u(!1),r=X({dari:null,sampai:null});function de(){m.value=!0,g.get("cektgl?dari="+r.dari+"&sampai="+r.sampai).then(()=>{g.get("asets/pdf?dari="+r.dari+"&sampai="+r.sampai,{responseType:"blob"}).then(n=>{const l=window.URL.createObjectURL(new Blob([n.data])),_=document.createElement("a");_.href=l,_.setAttribute("download","rekap_aset.pdf"),document.body.appendChild(_),_.click(),m.value=!1}).catch(n=>{b(n.response.data),m.value=!1})}).catch(n=>{b(n.response.data),m.value=!1})}function me(){r.dari=null,r.sampai=null}return(n,l)=>{const _=ve("auth-layout");return i(),C(_,{title:"Inventaris Aset",user:P.value},{default:t(()=>[o("div",he,[a(p,{class:"q-ml-sm",label:"Cek",color:"primary",onClick:l[0]||(l[0]=e=>B.value=!0)}),a(p,{class:"q-ml-sm",label:"Pinjam",color:"primary",onClick:l[1]||(l[1]=e=>D.value=!0)}),a(p,{class:"q-ml-sm",label:"Print",color:"primary",onClick:l[2]||(l[2]=e=>L.value=!0)}),(i(!0),v(y,null,x(R.value,e=>(i(),C(p,{key:e,class:"q-ml-sm",label:"Kembalikan",color:"primary",onClick:S=>re(e)},null,8,["onClick"]))),128)),o("div",xe,[a(be,{loading:w.value,title:"Inventaris Aset",rows:A.value,columns:oe,"row-key":"mulai_pinjam",filter:O.value,separator:"cell"},{top:t(()=>[Me,a(fe),a(M,{dense:"",debounce:"300",modelValue:O.value,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value=e),placeholder:"Cari tujuan / keperluan"},{append:t(()=>[a(Z,{name:"search"})]),_:1},8,["modelValue"])]),header:t(e=>[a(ee,{props:e},{default:t(()=>[(i(!0),v(y,null,x(e.cols,S=>(i(),C(ge,{key:S.name,props:e,class:"text-italic"},{default:t(()=>[f(d(S.label)+" ",1),S.sortable?(i(),C(Z,{key:0,name:"sort"})):G("",!0)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(e=>[a(ee,{props:e},{default:t(()=>[a(V,{key:"mulai_pinjam",props:e},{default:t(()=>[f(d(k(Q).formatDate(e.row.mulai_pinjam,"dddd, DD MMMM YYYY HH:mm:ss")),1)]),_:2},1032,["props"]),a(V,{key:"selesai_pinjam",props:e},{default:t(()=>[e.row.selesai_pinjam!=null?(i(),v(y,{key:0},[f(d(k(Q).formatDate(e.row.selesai_pinjam,"dddd, DD MMMM YYYY HH:mm:ss")),1)],64)):e.row.selesai_pinjam==null?(i(),v("div",Qe,"Belum dikembalikan")):G("",!0)]),_:2},1032,["props"]),a(V,{key:"kendaraan.nama",props:e},{default:t(()=>[f(d(e.row.kendaraan.nama),1)]),_:2},1032,["props"]),a(V,{key:"user.name",props:e},{default:t(()=>[f(d(e.row.user.name)+" ",1),qe,o("div",De,d(e.row.user.NIP),1)]),_:2},1032,["props"]),a(V,{key:"tujuan",props:e},{default:t(()=>[f(d(e.row.tujuan),1)]),_:2},1032,["props"]),a(V,{key:"keperluan",props:e},{default:t(()=>[f(d(e.row.keperluan),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),a(I,{modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=e=>D.value=e)},{default:t(()=>[a(Y,{class:"q-pa-md",style:{"max-width":"400px"}},{default:t(()=>[f(d(k(Q).formatDate(h.value,"dddd, DD MMMM YYYY HH:mm:ss"))+" ",1),a(F,{onSubmit:ue,onReset:z,class:"q-gutter-md"},{default:t(()=>[a(M,{filled:"",type:"text",modelValue:c.tujuan,"onUpdate:modelValue":l[4]||(l[4]=e=>c.tujuan=e),label:"Tujuan"},null,8,["modelValue"]),a(M,{filled:"",type:"text",modelValue:c.keperluan,"onUpdate:modelValue":l[5]||(l[5]=e=>c.keperluan=e),label:"Keperluan"},null,8,["modelValue"]),a(ke,{filled:"",modelValue:c.kendaraan_id,"onUpdate:modelValue":l[6]||(l[6]=e=>c.kendaraan_id=e),label:"Pilih kendaraan",options:q.value,"option-value":"id","option-label":"nama","emit-value":"","map-options":"",style:{width:"250px"}},null,8,["modelValue","options"]),o("div",null,[a(p,{label:"Pinjam",type:"submit",loading:m.value,color:"primary"},null,8,["loading"]),a(p,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:U.value,"onUpdate:modelValue":l[8]||(l[8]=e=>U.value=e)},{default:t(()=>[a(Y,{class:"q-pa-md",style:{"max-width":"400px"}},{default:t(()=>[f(d(k(Q).formatDate(h.value,"dddd, DD MMMM YYYY HH:mm:ss"))+" ",1),Ue,o("div",Se,d(N.value),1),a(F,{onSubmit:ie,class:"q-gutter-md"},{default:t(()=>[o("div",null,[a(p,{label:"Kembalikan",type:"submit",loading:m.value,color:"primary"},null,8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:B.value,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value=e),"transition-show":"rotate","transition-hide":"rotate"},{default:t(()=>[a(Y,null,{default:t(()=>[a(_e,null,{default:t(()=>[o("div",Ce,[(i(!0),v(y,null,x(T.value,e=>(i(),v("div",{class:"col-4",key:e},[o("div",{class:E([k(j).localStorage.getItem("darkMode")?"bg-orange-9":"bg-orange-2","text-center rounded-borders q-mr-md q-mb-sm"])},d(e.nama)+" dipinjam ",3)]))),128)),(i(!0),v(y,null,x(q.value,e=>(i(),v("div",{class:"col-4",key:e},[o("div",{class:E([k(j).localStorage.getItem("darkMode")?"bg-green-9":"bg-green-2","text-center rounded-borders q-mr-md q-mb-sm"])},d(e.nama)+" tersedia ",3)]))),128))]),o("div",Ye,[(i(!0),v(y,null,x(H.value,e=>(i(),v("div",{class:"col-4",key:e},[o("div",{class:E([k(j).localStorage.getItem("darkMode")?"bg-orange-9":"bg-orange-2","text-center rounded-borders q-mr-md"])},d(e.name),3)]))),128))])]),_:1}),a(ye,{align:"left"})]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:L.value,"onUpdate:modelValue":l[14]||(l[14]=e=>L.value=e)},{default:t(()=>[a(Y,{class:"q-pa-md",style:{"max-width":"400px"}},{default:t(()=>[a(F,{onSubmit:de,onReset:me,class:"q-gutter-md"},{default:t(()=>[a(M,{readonly:"",filled:"",modelValue:r.dari,"onUpdate:modelValue":l[11]||(l[11]=e=>r.dari=e),label:"Dari"},{default:t(()=>[a(le,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[a(te,{modelValue:r.dari,"onUpdate:modelValue":l[10]||(l[10]=e=>r.dari=e)},{default:t(()=>[o("div",Ie,[J(a(p,{label:"OK",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(M,{readonly:"",filled:"",modelValue:r.sampai,"onUpdate:modelValue":l[13]||(l[13]=e=>r.sampai=e),label:"Sampai"},{default:t(()=>[a(le,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[a(te,{modelValue:r.sampai,"onUpdate:modelValue":l[12]||(l[12]=e=>r.sampai=e)},{default:t(()=>[o("div",Pe,[J(a(p,{label:"OK",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),o("div",null,[a(p,{label:"Print",type:"submit",loading:m.value,color:"primary"},null,8,["loading"]),a(p,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["user"])}}});export{Ge as default};
